// 引入web3
let Web3 = require('web3')
// 创建web3实例
let web3 = new Web3()
// 设置网络
web3.setProvider('http://localhost:8501')

// 从01_compile.js中复制过来
let abi = [{"constant":true,"inputs":[],"name":"count","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"no","type":"uint256"}],"name":"get_addressC","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"no","type":"uint256"}],"name":"get_serviceState","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"no","type":"uint256"}],"name":"get_addressSP","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"type_S","type":"int256"},{"name":"no","type":"uint256"}],"name":"publicServiceConfirm","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"no","type":"uint256"}],"name":"get_pukClient","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"value","type":"string"},{"name":"no","type":"uint256"}],"name":"publicHashClient","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"no","type":"uint256"}],"name":"get_hashOfEncryptedS","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"encryptd_key","type":"string"},{"name":"no","type":"uint256"}],"name":"publicKey","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"no","type":"uint256"}],"name":"get_encryptedKey","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"no","type":"uint256"}],"name":"get_nameS","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"address_C","type":"string"},{"name":"address_SP","type":"string"},{"name":"name_S","type":"string"},{"name":"puk_C","type":"string"}],"name":"requestService","outputs":[{"name":"no","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"b","type":"bytes32"}],"name":"byte32ToString","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"name":"hash_EncryptedS","type":"string"},{"name":"no","type":"uint256"}],"name":"publicHashSP","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"ret","type":"string"},{"indexed":false,"name":"no","type":"uint256"}],"name":"RequestService","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"ret","type":"string"}],"name":"SP_Public_HashOfEncryptedS","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"ret","type":"string"}],"name":"Client_Public_HashOfEncryptedS","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"ret","type":"string"}],"name":"SP_Public_EncryptedKey","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"ret","type":"string"}],"name":"Client_Public_ServiceConfirm","type":"event"}]

// 在02_deploy.js中生成的合约地址
let address = '0x29368B56dE543f7C83D18B8E99ae4eD8e27D6Dab'

// 获取合约实例
let contractInstance = new web3.eth.Contract(abi, address)

// 导出合约实例
module.exports = contractInstance
